syntax = "proto3";

service Branch {
  rpc Query (QueryRequest) returns (Balance) {}

  rpc Deposit (TransactionRequest) returns (TransactionResponse) {}

  rpc Withdraw (TransactionRequest) returns (TransactionResponse) {}

  rpc Propagate_Withdraw (Balance) returns (PropagateResponse) {}

  rpc Propagate_Deposit (Balance) returns (PropagateResponse) {}
  
}

message QueryRequest {
  int32 customer_id = 1;
}

message TransactionRequest {
  int32 customer_id = 1;
  int32 amount = 2;
}

message TransactionResponse {
  string interface = 1;
  string result = 2;
}

message PropagateResponse {
  string message = 1;
}

message Balance {
  int32 customer_id = 1;
  int32 money = 2;
}